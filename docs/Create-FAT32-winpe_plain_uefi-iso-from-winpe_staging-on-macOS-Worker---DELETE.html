
<!doctype html>
<html lang="en">




<head>
    <title>How to Create FAT32 winpe_plain_uefi.iso from winpe_staging on macOS Worker - DELETE - Attune Automation</title>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport"
          content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="title"
          content="How to Create FAT32 winpe_plain_uefi.iso from winpe_staging on macOS Worker - DELETE - Attune Automation">
    <meta name="description"
<<<<<<< HEAD:docs/Create-FAT32-winpe_plain_uefi-iso-from-winpe_staging-on-macOS-Worker---DELETE.html
          content="">
=======
          content="The Windows Server 2016 ISO is placed on the Samba server at `${HOME}/windows_iso_data_for_winpe/windows2016`. ">
>>>>>>> c9dd0c8 (AUSTA-257: Test push.):docs/Deploy-Win2016-ISO-to-Samba-Share.html
    <meta name="robots"
          content="follow, index, max-snippet:-1, max-video-preview:-1, max-image-preview:large">

    <meta property="og:locale" content="en_AU" />
    <meta property="og:type" content="article" />
    <meta property="og:title"
<<<<<<< HEAD:docs/Create-FAT32-winpe_plain_uefi-iso-from-winpe_staging-on-macOS-Worker---DELETE.html
          content="HowTo Create FAT32 winpe_plain_uefi.iso from winpe_staging on macOS Worker - DELETE - Attune Automation" />
    <meta property="og:description" content="" />
=======
          content="HowTo Deploy Win2016 ISO to Samba Share - Attune Automation" />
    <meta property="og:description" content="The Windows Server 2016 ISO is placed on the Samba server at `${HOME}/windows_iso_data_for_winpe/windows2016`. " />
>>>>>>> c9dd0c8 (AUSTA-257: Test push.):docs/Deploy-Win2016-ISO-to-Samba-Share.html
    <meta property="og:site_name" content="Attune Automation" />
    <meta property="article:section" content="IT Instruction" />

    <meta name="twitter:title"
<<<<<<< HEAD:docs/Create-FAT32-winpe_plain_uefi-iso-from-winpe_staging-on-macOS-Worker---DELETE.html
          content="How to Create FAT32 winpe_plain_uefi.iso from winpe_staging on macOS Worker - DELETE - Attune Automation" />
    <meta name="twitter:description" content="" />
=======
          content="How to Deploy Win2016 ISO to Samba Share - Attune Automation" />
    <meta name="twitter:description" content="The Windows Server 2016 ISO is placed on the Samba server at `${HOME}/windows_iso_data_for_winpe/windows2016`. " />
>>>>>>> c9dd0c8 (AUSTA-257: Test push.):docs/Deploy-Win2016-ISO-to-Samba-Share.html

    <link rel="icon" href="https://www.servertribe.com/wp-content/uploads/2020/10/cropped-server_tribe_favicon-32x32.png" sizes="32x32">
    <link rel="icon" href="https://www.servertribe.com/wp-content/uploads/2020/10/cropped-server_tribe_favicon-192x192.png" sizes="192x192">
    <link rel="apple-touch-icon" href="https://www.servertribe.com/wp-content/uploads/2020/10/cropped-server_tribe_favicon-180x180.png">
    <meta name="msapplication-TileImage" content="https://www.servertribe.com/wp-content/uploads/2020/10/cropped-server_tribe_favicon-270x270.png">
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
          integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
          crossorigin="anonymous">
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">
    <link rel="stylesheet" href="styles/style.css">

    <!-- Google tag (gtag.js) -->
    <script async
            src="https://www.googletagmanager.com/gtag/js?id=G-5TZQZNDJCD"></script>
    <script>
        window.dataLayer = window.dataLayer || [];

        function gtag() {
            dataLayer.push(arguments);
        }

        gtag('js', new Date());

        gtag('config', 'G-5TZQZNDJCD');
    </script>
</head>


<body>

<!-- Project NavBar -->

<div class="bg-white border-bottom box-shadow sticky-top mb-3">
<div class="container px-0">
    <div class="row px-0">
        <div class="col d-flex flex-column flex-lg-row align-items-center px-0
            py-3">
            <a class="navbar-brand my-0 mr-lg-auto"
                  href="https://www.servertribe.com/"
                  target="_blank">
                    <img
                        src="https://www.servertribe.com/wp-content/uploads/2022/06/AttuneLogoV2_powered_by.png"
                        alt="Attune - Powered by ServerTribe"
                        class="img-fluid navbar-img">
            </a>
            <nav class="my-2 my-lg-0 mr-lg-3">
                <a class="p-2 text-dark" href="http://doc.servertribe.com/"
                   target="_blank">
                    Documentation
                </a>
                <a class="p-2 text-dark"
                   href="https://discord.com/invite/3YpJsagqUn"
                   target="_blank">
                    Discord
                </a>
                <a class="p-2 text-dark" href="https://github.com/Attune-Automation"
                   target="_blank">
                    GitHub
                </a>
                <a class="p-2 text-dark" href="https://www.servertribe.com/learn/"
                   target="_blank">
                    Learn
                </a>
            </nav>
            <a class="btn btn-outline-primary"
               href="https://www.servertribe.com/download-attune-registration/"
               target="_blank">
                Download NOW!
            </a>
        </div>
    </div>
</div></div>

<!-- Project breadcrumbs -->

<!-- Project breadcrumbs -->
<div class="container px-0">
    <div class="row">
        <nav class="col px-0" aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item">
                    <a href="index.html">
                    Automate Windows Installation with autounattend
                    </a>
                </li>
                <li class="breadcrumb-item active" aria-current="page">
                    <strong>Create FAT32 winpe_plain_uefi.iso from winpe_staging on macOS Worker - DELETE</strong>
                </li>
            </ol>
        </nav>
    </div>
</div>

<!-- Blueprint Header -->

<div class="container px-0">
    <!-- Blueprint name and description -->
    <div class="row">
        <div class="col px-0">
            <h1 class="text-left">
                How to Create FAT32 winpe_plain_uefi.iso from winpe_staging on macOS Worker - DELETE
            </h1>
        </div>
    </div>

<!-- Blueprint Description -->
<<<<<<< HEAD:docs/Create-FAT32-winpe_plain_uefi-iso-from-winpe_staging-on-macOS-Worker---DELETE.html
=======
    <div class="row">
        <div class="description col px-0">
            <p class="text-left">
                <p>The Windows Server 2016 ISO is placed on the Samba server at <code>${HOME}/windows_iso_data_for_winpe/windows2016</code>. </p>
            </p>
        </div>
    </div>
>>>>>>> c9dd0c8 (AUSTA-257: Test push.):docs/Deploy-Win2016-ISO-to-Samba-Share.html
    <div class="row pt-4">
        <div class="col-6 px-0">
            <h6 class="text-left">
                This documentation is generated by
                <a href="https://www.servertribe.com/"
                    class="badge badge-primary"
                    target="_blank">
                    Attune
                </a>
            </h6>
        </div>
        <div class="col-6 align-self-end text-right px-0">
            <h6 class="text-right">
                <a href="https://www.youtube.com/@servertribe"
                    class="badge badge-secondary"
                    target="_blank">
                    YouTube
                </a>
                <a href="https://github.com/Attune-Automation"
                    class="badge badge-secondary"
                    target="_blank">
                    GitHub
                </a>
                <a href="https://discord.com/invite/3YpJsagqUn"
                    class="badge badge-secondary"
                    target="_blank">
                    Discord
                </a>
                <a href="https://www.linkedin.com/company/servertribe/"
                    class="badge badge-secondary"
                    target="_blank">
                    LinkedIn
                </a>
                <a href="http://doc.servertribe.com/"
                    class="badge badge-secondary"
                    target="_blank">
                    Documentation
                </a>
            </h6>
        </div>
    </div>
    <hr>
</div>

<div class="documentation">
    <div class="container px-0">
        <div class="row">

<!-- Blueprint ToC -->


            <div class="toc col-lg-2 px-0 pr-5">
                <div class="container px-0 pt-3">
                    <p class="pb-2">
                        <strong>Contents</strong>
                    </p>
                    <p class="text-muted">
                        <a href="#top">
                            <strong>Create FAT32 winpe_plain_uefi.iso from winpe_staging on macOS Worker - DELETE</strong>
                        </a>
                    </p>


    
        

                    <p class="text-muted pt-2">
                        <a href="#createwinpeplainuefiisoonmacos">
                            <strong>Step 1 -</strong> Create winpe_plain_uefi.iso on macOS
                        </a>
                    </p>

        

                    <p class="text-muted pt-2">
                        <a href="#mountwinpeplainuefidmgonmacosworker">
                            <strong>Step 2 -</strong> Mount winpe_plain_uefi.dmg on macOS Worker
                        </a>
                    </p>

        

                    <p class="text-muted pt-2">
                        <a href="#movewinpestagingtouefimountonmacos">
                            <strong>Step 3 -</strong> Move WinPE Staging to UEFI Mount on macOS
                        </a>
                    </p>

        

                    <p class="text-muted pt-2">
                        <a href="#unmountwinpeuefimountonmacos">
                            <strong>Step 4 -</strong> Unmount WinPE UEFI Mount on macOS
                        </a>
                    </p>


                </div>
            </div>

<!-- Blueprint Contents -->
            <div class="col-lg-8 pt-3">
                <div class="container">


        <div class="jumbotron">
            <p class="display-3 text-center">
                <strong>Automate This</strong>
            </p>
            <p class="lead text-center">
                Use the <strong>Attune GUI</strong> for your Scripts
            </p>
            <p class="lead">
                <ol>
                    <a href="https://www.servertribe.com/download-attune-registration/"
                        target="_blank">
                        <span class="badge badge-primary">1</span>
                        Download Attune
                        <i class="fa-solid fa-download fa-beat-fade" style="color: #0197ff;"></i>
                    </a>
                </ol>
                <ol>
                    <a href="https://github.com/attune-Automation/"
                        target="_blank">
                        <span class="badge badge-primary">2</span>
                         Copy the Attune Project URL
                         <i class="fa-brands fa-github fa-fade"></i>
                    </a>
                </ol>
                <ol>
                    <a href="https://servertribe-attune.readthedocs.io/en/latest/howto/design_workspace/clone_project.html"
                        target="_blank">
                        <span class="badge badge-primary">3</span>
                        Clone the Project in Attune
                         <i class="fa-solid fa-book fa-fade" style="color: #0197ff;"></i>
                    </a>
                </ol>
                <ol>
                    <a href="https://www.youtube.com/watch?v=GCWDI29rDV0"
                        target="_blank">
                        <span class="badge badge-primary">4</span>
                        Plan your Job(s)
                        <i class="fa-brands fa-youtube fa-fade" style="color: #0197ff;"></i>
                    </a>
                </ol>
                <ol>
                    <a href="https://www.youtube.com/watch?v=b7DhFcURkZg"
                        target="_blank">
                        <span class="badge badge-primary">5</span>
                        Run your Job(s)
                        <i class="fa-brands fa-youtube fa-fade" style="color: #0197ff;"></i>
                    </a>
                </ol>
            </p>
            <p class="lead text-center">
                You've automated: <strong>Create FAT32 winpe_plain_uefi.iso from winpe_staging on macOS Worker - DELETE</strong>
            </p>
            <hr class="my-4 text-center">
            <div class="col px-0">
                <p class="text-center">
                    Get the most out of automation with our get started
                    videos, product demonstrations, and more.
                </p>
                <p class="lead text-center">
                    <a class="btn btn-primary btn-lg"
                       href="https://www.servertribe.com/learn/"
                       target="_blank"
                       role="button">
                        Learn Attune Automation
                    </a>
                </p>
            </div>
        </div>

        <div class="row">
            <p>The following steps will guide you through the manual process.</p>
        </div>

<!-- Blueprint Steps -->


        



                    <div class="row pt-5">
                        <h3 id="createwinpeplainuefiisoonmacos">
                            <a href="#createwinpeplainuefiisoonmacos">
                                <strong>Step 1 -</strong> Create winpe_plain_uefi.iso on macOS
                            </a>
                        </h3>
                    </div>

                    <div class="row">
                        <div class="description col px-0">
                            <p>
                                
                            </p>
                        </div>
                    </div>










                        <div class="row">
                            <p>
                                Connect via ssh:
                            </p>
                        </div>
                        <div class="row py-1">
                            <code class="language-sql">
ssh {automationworkerlinuxuser}@{automationworkerlinuxnode}
                            </code>
                        </div>



    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
if {kickstartedBootLoaderIsUefi}
then
    cd &quot;{automationWorkerBaseDirectory}/build-winpe-iso&quot;
        
    if uname | \
        grep -iq &quot;darwin&quot;
    then
        echo &quot;is macOS&quot;
        
        bytes=$(du -s winpe_staging | awk &#x27;{print $1}&#x27;)
        ((bytes=bytes+10000))
        
        echo &quot;bytes=${bytes}&quot;
        
        DMG=&quot;{automationWorkerBaseDirectory}/winpe_plain_uefi.dmg&quot;
        
        hdiutil create -size &quot;${bytes}b&quot; \
            -verbose \
            -fs &quot;MS-DOS FAT32&quot; \
            -format &quot;UDTO&quot; \
            -ov \
            -volname &quot;kickstart&quot; &quot;${DMG}&quot;
            
            # fs &quot;MS-DOS FAT32&quot; \
            #-type UDTO \
        
    else
        echo &quot;not macOS, skipping&quot;
        
        hdiutil create -size 513m -fs &quot;MS-DOS FAT32&quot; -volname &quot;test&quot; test_from_hdiutil.dmg

    fi
    
else
    echo &quot;Skipping for BIOS boot.&quot;
fi
                </code>
            </pre>
        </div>
    </div>





        



                    <div class="row pt-5">
                        <h3 id="mountwinpeplainuefidmgonmacosworker">
                            <a href="#mountwinpeplainuefidmgonmacosworker">
                                <strong>Step 2 -</strong> Mount winpe_plain_uefi.dmg on macOS Worker
                            </a>
                        </h3>
                    </div>

                    <div class="row">
                        <div class="description col px-0">
                            <p>
                                
                            </p>
                        </div>
                    </div>










                        <div class="row">
                            <p>
                                Connect via ssh:
                            </p>
                        </div>
                        <div class="row py-1">
                            <code class="language-sql">
ssh {automationworkerlinuxuserroot}@{automationworkerlinuxnode}
                            </code>
                        </div>



    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
if uname | \
    grep -iq &quot;darwin&quot;
then
    echo &quot;is macOS&quot;
    
    cd &quot;{automationWorkerBaseDirectory}/build-winpe-iso&quot;
    
    DMG=&quot;{automationWorkerBaseDirectory}/winpe_plain_uefi.dmg&quot;
    
    MOUNT_FOLDER=&quot;uefi_mount&quot;
    
    mkdir -p -v &quot;${MOUNT_FOLDER}&quot;
    
    hdiutil attach &quot;${DMG}&quot; -mountpoint &quot;${MOUNT_FOLDER}&quot;    
else
    echo &quot;not macOS, skipping&quot;

fi
                </code>
            </pre>
        </div>
    </div>





        



                    <div class="row pt-5">
                        <h3 id="movewinpestagingtouefimountonmacos">
                            <a href="#movewinpestagingtouefimountonmacos">
                                <strong>Step 3 -</strong> Move WinPE Staging to UEFI Mount on macOS
                            </a>
                        </h3>
                    </div>

                    <div class="row">
                        <div class="description col px-0">
                            <p>
                                
                            </p>
                        </div>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
if {kickstartedBootLoaderIsUefi}
then
    if uname | \
        grep -iq &quot;darwin&quot;
    then
        echo &quot;is macOS&quot;
                
        cd &quot;{automationWorkerBaseDirectory}/build-winpe-iso&quot;
        
        # Copy WinPE Files from WinPE ISO
        cp -v -R winpe_staging/* &quot;uefi_mount&quot;
    else
        echo &quot;not macOS, skipping&quot;

    fi
else
    echo &quot;Skipping for BIOS boot.&quot;
fi
                </code>
            </pre>
        </div>
    </div>





        



                    <div class="row pt-5">
                        <h3 id="unmountwinpeuefimountonmacos">
                            <a href="#unmountwinpeuefimountonmacos">
                                <strong>Step 4 -</strong> Unmount WinPE UEFI Mount on macOS
                            </a>
                        </h3>
                    </div>

                    <div class="row">
                        <div class="description col px-0">
                            <p>
                                
                            </p>
                        </div>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
if {kickstartedBootLoaderIsUefi}
then
    if uname | \
        grep -iq &quot;darwin&quot;
    then
        echo &quot;is macOS&quot;
        
        MOUNT_FOLDER=&quot;uefi_mount&quot;
        MOUNT_PATH=&quot;{automationWorkerBaseDirectory}/build-winpe-iso/${MOUNT_FOLDER}&quot;
        
        if df -h | grep --ignore-case \
            --quiet \
            &quot;${MOUNT_PATH}&quot;
        then
        
            cd &quot;{automationWorkerBaseDirectory}/build-winpe-iso&quot;
            
            umount -v &quot;${MOUNT_FOLDER}&quot;
        else
            echo &quot;${MOUNT_PATH} is not mounted. Skipping.&quot;
        fi
    else
        echo &quot;not macOS, skipping&quot;
    
    fi
    
else
    echo &quot;Skipping for BIOS boot.&quot;
fi
                </code>
            </pre>
        </div>
    </div>






                    <div class="row pt-5">
                        <div class="col">
                            <h2>Completed</h2>
                            <p>
                                You have completed this instruction.
                            </p>
                        </div>
                    </div>
                </div>
            </div>

<!-- Download Attune Ad -->

            <div class="toc col-lg-2 px-0">
                <div class="container px-0 pt-3 pl-5">
                    <div class="card border-light mb-3" style="max-width: 18rem;">
                        <div class="card-body attune-ad">
                            <img
                                src="https://www.servertribe.com/wp-content/uploads/2022/06/AttuneLogoV2_powered_by.png"
                                alt="Attune - Powered by ServerTribe"
                                class="img-fluid">
                            <p class="card-title mt-3 text-center">
                                <strong>Automate with Attune</strong>
                            </p>
                            <p class="card-text text-center">
                                Download the Attune Community Edition.
                            </p>
                            <p class="text-center">
                                <a href="https://www.servertribe.com/download-attune-registration/"
                                   class="btn btn-primary mt-3">
                                    DOWNLOAD!!!
                                </a>
                            </p>
                        </div>
                    </div>
                </div>
            </div>

        </div>

<!-- Join Discord -->

        <div class="row py-5">
            <div class="jumbotron">
              <h1 class="display-4 text-center">
                  Discuss this Project in Discord
              </h1>
              <p class="lead">

                  Join our Discord channel and connect with like-minded individuals who
                  share your passion. Engage in lively discussions, gain valuable insights,
                  and stay updated on the latest trends in our industry. Don't miss out on
                  this opportunity to network, learn, and grow together.
              </p>
              <hr class="my-4 text-center">
                <div class="col px-0">
                  <p class="text-center">
                      Click the link below and become a part of our vibrant community on
                      Discord today!
                  </p>
                  <p class="lead text-center">
                    <a class="btn btn-primary btn-lg"
                       href="https://discord.com/invite/3YpJsagqUn"
                       role="button">
                        Join NOW!!!
                    </a>
                  </p>
                </div>
            </div>
        </div>

    </div>
</div>

<!-- Project Footer -->

<footer class="footer fixed-bottom bg-white border-top box-shadow">
      <div class="container px-0">
          <div class="row">
              <div class="col px-0">
                  <a class="my-0 mr-lg-auto"
                     href="https://www.servertribe.com/"
                     target="_blank">
                      <img
                          src="https://www.servertribe.com/wp-content/uploads/2022/06/AttuneLogoV2_powered_by.png"
                          alt="Attune - Powered by ServerTribe"
                          class="img-fluid navbar-img">
                  </a>
              </div>
          </div>
      </div>
</footer>


<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
        integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
        crossorigin="anonymous"></script>
<script
    src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
    integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
    crossorigin="anonymous"></script>
<script
    src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
    integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
    crossorigin="anonymous"></script>

<script
    src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>

<script
    src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
<script
    src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>


</body>
</html>
