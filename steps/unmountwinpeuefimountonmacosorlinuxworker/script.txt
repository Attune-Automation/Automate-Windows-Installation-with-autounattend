if {kickstartedBootLoaderIsUefi}
then

    MOUNT_FOLDER="uefi_mount"
    MOUNT_PATH="{automationWorkerLinuxBaseDirectory}/build-winpe-iso/${MOUNT_FOLDER}"
    
    if [[ -f /etc/redhat-release ]] || [[ -f /etc/lsb-release ]] || [[ -f /etc/debian_version ]]
    then
        
        if df -h | grep --ignore-case --quiet "${MOUNT_PATH}"
        then
        
            cd "{automationWorkerLinuxBaseDirectory}/build-winpe-iso"
            umount --verbose "${MOUNT_FOLDER}"
            
        else
        
            echo "${MOUNT_PATH} is not mounted. Skipping."
        fi

    elif [[ "$(uname)" == "Darwin" ]]
    then
    
        if [[ -d "$(echo ${MOUNT_PATH}/*)" ]]
        then
        
            hdiutil detach "$(echo ${MOUNT_PATH}/*)"
        else
        
            echo "${MOUNT_PATH} is not mounted. Skipping."
        fi

    else
        
        echo "Unsupported operating system."
    fi
    
else

    echo "Skipping for BIOS boot."
fi